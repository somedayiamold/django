<svg id="SvgjsSvg1006" width="1848" height="1982" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1007"><marker id="SvgjsMarker1022" markerWidth="14" markerHeight="12" refX="16" refY="6" viewBox="0 0 14 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1023" d="M1,1 L14,6 L1,11L1,1" fill="#ffffff" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1052" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1053" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1068" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1069" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1072" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1073" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1136" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1137" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1140" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1141" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1188" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1189" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1192" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1193" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1240" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1241" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1244" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1245" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1278" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1279" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1286" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1287" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1294" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1295" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1302" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1303" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1310" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1311" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1318" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1319" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1326" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1327" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1352" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1353" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1356" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1357" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker></defs><g id="SvgjsG1008" transform="translate(25,719)"><path id="SvgjsPath1009" d="M 0 0L 100 0L 100 70L 0 70Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1010"><text id="SvgjsText1011" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="80px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="23.875" transform="rotate(0)"><tspan id="SvgjsTspan1012" dy="16" x="50"><tspan id="SvgjsTspan1013" style="text-decoration:;">BaseHandler</tspan></tspan></text></g></g><g id="SvgjsG1014" transform="translate(25,1710.25)"><path id="SvgjsPath1015" d="M 0 0L 100 0L 100 70L 0 70Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1016"><text id="SvgjsText1017" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="80px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="23.875" transform="rotate(0)"><tspan id="SvgjsTspan1018" dy="16" x="50"><tspan id="SvgjsTspan1019" style="text-decoration:;">WSGIHandler</tspan></tspan></text></g></g><g id="SvgjsG1020"><path id="SvgjsPath1021" d="M75 1709.25L75 1249.625L75 1249.625L75 792.6" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1022)"></path></g><g id="SvgjsG1024" transform="translate(479.5,1534)"><path id="SvgjsPath1025" d="M 0 4Q 0 0 4 0L 632 0Q 636 0 636 4L 636 418.5Q 636 422.5 632 422.5L 4 422.5Q 0 422.5 0 418.5Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1026"><text id="SvgjsText1027" font-family="微软雅黑" text-anchor="start" font-size="13px" width="616px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="200.125" transform="rotate(0)"></text></g></g><g id="SvgjsG1028" transform="translate(774.5,1624.5)"><path id="SvgjsPath1029" d="M 0 0L 204 0L 204 68L 0 68Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1030"><text id="SvgjsText1031" font-family="微软雅黑" text-anchor="start" font-size="13px" width="184px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1032" dy="16" x="10"><tspan id="SvgjsTspan1033" style="text-decoration:;">super().__init__(*args, **kwargs)</tspan></tspan><tspan id="SvgjsTspan1034" dy="16" x="10"><tspan id="SvgjsTspan1035" style="text-decoration:;"># 调用父类的load_middleware</tspan></tspan><tspan id="SvgjsTspan1036" dy="16" x="10"><tspan id="SvgjsTspan1037" style="text-decoration:;">self.load_middleware()</tspan></tspan></text></g></g><g id="SvgjsG1038" transform="translate(587.5,1638.5)"><path id="SvgjsPath1039" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1040"><text id="SvgjsText1041" font-family="微软雅黑" text-anchor="start" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="8.875" transform="rotate(0)"><tspan id="SvgjsTspan1042" dy="16" x="0"><tspan id="SvgjsTspan1043" style="text-decoration:;">实例化__init__</tspan></tspan></text></g></g><g id="SvgjsG1044" transform="translate(587.5,1813.25)"><path id="SvgjsPath1045" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1046"><text id="SvgjsText1047" font-family="微软雅黑" text-anchor="start" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="8.875" transform="rotate(0)"><tspan id="SvgjsTspan1048" dy="16" x="0"><tspan id="SvgjsTspan1049" style="text-decoration:;">实例调用__call__</tspan></tspan></text></g></g><g id="SvgjsG1050"><path id="SvgjsPath1051" d="M708.5 1658.5L741 1658.5L741 1658.5L770.9000000000001 1658.5" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1052)"></path></g><g id="SvgjsG1054" transform="translate(768.5,1784)"><path id="SvgjsPath1055" d="M 0 0L 216 0L 216 98.5L 0 98.5Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1056"><text id="SvgjsText1057" font-family="微软雅黑" text-anchor="start" font-size="13px" width="196px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="5.625" transform="rotate(0)"><tspan id="SvgjsTspan1058" dy="16" x="10"><tspan id="SvgjsTspan1059" style="text-decoration:;"># 初始化requestrequest = Request()</tspan></tspan><tspan id="SvgjsTspan1060" dy="16" x="10"><tspan id="SvgjsTspan1061" style="text-decoration:;"># 调用父类的get_response</tspan></tspan><tspan id="SvgjsTspan1062" dy="16" x="10"><tspan id="SvgjsTspan1063" style="text-decoration:;">response = self.get_response(request)</tspan></tspan><tspan id="SvgjsTspan1064" dy="16" x="10"><tspan id="SvgjsTspan1065" style="text-decoration:;">return response</tspan></tspan></text></g></g><g id="SvgjsG1066"><path id="SvgjsPath1067" d="M708.5 1833.25L738 1833.25L738 1833.25L764.9000000000001 1833.25" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1068)"></path></g><g id="SvgjsG1070"><path id="SvgjsPath1071" d="M126 1745.25L302.25 1745.25L302.25 1745.25L475.9 1745.25" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1072)"></path></g><g id="SvgjsG1074" transform="translate(215,25)"><path id="SvgjsPath1075" d="M 0 4Q 0 0 4 0L 1604 0Q 1608 0 1608 4L 1608 1454Q 1608 1458 1604 1458L 4 1458Q 0 1458 0 1454Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1076"><text id="SvgjsText1077" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="1588px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="717.875" transform="rotate(0)"></text></g></g><g id="SvgjsG1078" transform="translate(276,102)"><path id="SvgjsPath1079" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1080"><text id="SvgjsText1081" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="8.875" transform="rotate(0)"><tspan id="SvgjsTspan1082" dy="16" x="60"><tspan id="SvgjsTspan1083" style="text-decoration:;"> load_middleware</tspan></tspan></text></g></g><g id="SvgjsG1084" transform="translate(431,46)"><path id="SvgjsPath1085" d="M 0 0L 1270 0L 1270 974L 0 974Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1086"><text id="SvgjsText1087" font-family="微软雅黑" text-anchor="start" font-size="13px" width="1250px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="475.875" transform="rotate(0)"><tspan id="SvgjsTspan1088" dy="16" x="10"><tspan id="SvgjsTspan1089" style="text-decoration:;">_middleware_chain</tspan></tspan></text></g></g><g id="SvgjsG1090" transform="translate(473,76)"><path id="SvgjsPath1091" d="M 0 0L 711 0L 711 264L 0 264Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1092"><text id="SvgjsText1093" font-family="微软雅黑" text-anchor="start" font-size="13px" width="691px" fill="#323232" font-weight="400" align="top" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-2.625" transform="rotate(0)"><tspan id="SvgjsTspan1094" dy="16" x="10"><tspan id="SvgjsTspan1095" style="text-decoration:;">Top</tspan></tspan></text></g></g><g id="SvgjsG1096" transform="translate(587.5,107)"><path id="SvgjsPath1097" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1098"><text id="SvgjsText1099" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="8.875" transform="rotate(0)"><tspan id="SvgjsTspan1100" dy="16" x="60"><tspan id="SvgjsTspan1101" style="text-decoration:;">实例初始化</tspan></tspan></text></g></g><g id="SvgjsG1102" transform="translate(580.5,224)"><path id="SvgjsPath1103" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1104"><text id="SvgjsText1105" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="8.875" transform="rotate(0)"><tspan id="SvgjsTspan1106" dy="16" x="60"><tspan id="SvgjsTspan1107" style="text-decoration:;">实例调用</tspan></tspan></text></g></g><g id="SvgjsG1108" transform="translate(794,92)"><path id="SvgjsPath1109" d="M 0 0L 244 0L 244 70L 0 70Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1110"><text id="SvgjsText1111" font-family="微软雅黑" text-anchor="start" font-size="13px" width="224px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.875" transform="rotate(0)"><tspan id="SvgjsTspan1112" dy="16" x="10"><tspan id="SvgjsTspan1113" style="text-decoration:;">def __init__(self, get_response):</tspan></tspan><tspan id="SvgjsTspan1114" dy="16" x="10"><tspan id="SvgjsTspan1115" style="text-decoration:;">        print('Top init')</tspan></tspan><tspan id="SvgjsTspan1116" dy="16" x="10"><tspan id="SvgjsTspan1117" style="text-decoration:;">        self.get_response = get_response</tspan></tspan></text></g></g><g id="SvgjsG1118" transform="translate(794,180)"><path id="SvgjsPath1119" d="M 0 0L 244 0L 244 128L 0 128Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1120"><text id="SvgjsText1121" font-family="微软雅黑" text-anchor="start" font-size="13px" width="224px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="12.375" transform="rotate(0)"><tspan id="SvgjsTspan1122" dy="16" x="10"><tspan id="SvgjsTspan1123" style="text-decoration:;">def __call__(self, request):</tspan></tspan><tspan id="SvgjsTspan1124" dy="16" x="10"><tspan id="SvgjsTspan1125" style="text-decoration:;">        print('Top call')</tspan></tspan><tspan id="SvgjsTspan1126" dy="16" x="10"><tspan id="SvgjsTspan1127" style="text-decoration:;">        request.set_name('Top')</tspan></tspan><tspan id="SvgjsTspan1128" dy="16" x="10"><tspan id="SvgjsTspan1129" style="text-decoration:;">        response = self.get_response(request)</tspan></tspan><tspan id="SvgjsTspan1130" dy="16" x="10"><tspan id="SvgjsTspan1131" style="text-decoration:;">        raise Exception('Top exception')</tspan></tspan><tspan id="SvgjsTspan1132" dy="16" x="10"><tspan id="SvgjsTspan1133" style="text-decoration:;">        return response</tspan></tspan></text></g></g><g id="SvgjsG1134"><path id="SvgjsPath1135" d="M708.5 127L750.75 127L750.75 127L790.4000000000001 127" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1136)"></path></g><g id="SvgjsG1138"><path id="SvgjsPath1139" d="M701.5 244L747.25 244L747.25 244L790.4000000000001 244" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1140)"></path></g><g id="SvgjsG1142" transform="translate(656,398)"><path id="SvgjsPath1143" d="M 0 0L 711 0L 711 264L 0 264Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1144"><text id="SvgjsText1145" font-family="微软雅黑" text-anchor="start" font-size="13px" width="691px" fill="#323232" font-weight="400" align="top" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-2.625" transform="rotate(0)"><tspan id="SvgjsTspan1146" dy="16" x="10"><tspan id="SvgjsTspan1147" style="text-decoration:;">Middle</tspan></tspan></text></g></g><g id="SvgjsG1148" transform="translate(770.5,429)"><path id="SvgjsPath1149" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1150"><text id="SvgjsText1151" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="8.875" transform="rotate(0)"><tspan id="SvgjsTspan1152" dy="16" x="60"><tspan id="SvgjsTspan1153" style="text-decoration:;">实例初始化</tspan></tspan></text></g></g><g id="SvgjsG1154" transform="translate(763.5,546)"><path id="SvgjsPath1155" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1156"><text id="SvgjsText1157" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="8.875" transform="rotate(0)"><tspan id="SvgjsTspan1158" dy="16" x="60"><tspan id="SvgjsTspan1159" style="text-decoration:;">实例调用</tspan></tspan></text></g></g><g id="SvgjsG1160" transform="translate(977,414)"><path id="SvgjsPath1161" d="M 0 0L 244 0L 244 70L 0 70Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1162"><text id="SvgjsText1163" font-family="微软雅黑" text-anchor="start" font-size="13px" width="224px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.875" transform="rotate(0)"><tspan id="SvgjsTspan1164" dy="16" x="10"><tspan id="SvgjsTspan1165" style="text-decoration:;">def __init__(self, get_response):</tspan></tspan><tspan id="SvgjsTspan1166" dy="16" x="10"><tspan id="SvgjsTspan1167" style="text-decoration:;">        print('Middle init')</tspan></tspan><tspan id="SvgjsTspan1168" dy="16" x="10"><tspan id="SvgjsTspan1169" style="text-decoration:;">        self.get_response = get_response</tspan></tspan></text></g></g><g id="SvgjsG1170" transform="translate(977,502)"><path id="SvgjsPath1171" d="M 0 0L 244 0L 244 128L 0 128Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1172"><text id="SvgjsText1173" font-family="微软雅黑" text-anchor="start" font-size="13px" width="224px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="12.375" transform="rotate(0)"><tspan id="SvgjsTspan1174" dy="16" x="10"><tspan id="SvgjsTspan1175" style="text-decoration:;">def __call__(self, request):</tspan></tspan><tspan id="SvgjsTspan1176" dy="16" x="10"><tspan id="SvgjsTspan1177" style="text-decoration:;">        print('Middle call')</tspan></tspan><tspan id="SvgjsTspan1178" dy="16" x="10"><tspan id="SvgjsTspan1179" style="text-decoration:;">        request.set_name('Middle')</tspan></tspan><tspan id="SvgjsTspan1180" dy="16" x="10"><tspan id="SvgjsTspan1181" style="text-decoration:;">        response = self.get_response(request)</tspan></tspan><tspan id="SvgjsTspan1182" dy="16" x="10"><tspan id="SvgjsTspan1183" style="text-decoration:;">        raise Exception('Middle exception')</tspan></tspan><tspan id="SvgjsTspan1184" dy="16" x="10"><tspan id="SvgjsTspan1185" style="text-decoration:;">        return response</tspan></tspan></text></g></g><g id="SvgjsG1186"><path id="SvgjsPath1187" d="M891.5 449L933.75 449L933.75 449L973.4000000000001 449" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1188)"></path></g><g id="SvgjsG1190"><path id="SvgjsPath1191" d="M884.5 566L930.25 566L930.25 566L973.4000000000001 566" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1192)"></path></g><g id="SvgjsG1194" transform="translate(854,720)"><path id="SvgjsPath1195" d="M 0 0L 711 0L 711 264L 0 264Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1196"><text id="SvgjsText1197" font-family="微软雅黑" text-anchor="start" font-size="13px" width="691px" fill="#323232" font-weight="400" align="top" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-2.625" transform="rotate(0)"><tspan id="SvgjsTspan1198" dy="16" x="10"><tspan id="SvgjsTspan1199" style="text-decoration:;">Bottom</tspan></tspan></text></g></g><g id="SvgjsG1200" transform="translate(968.5,751)"><path id="SvgjsPath1201" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1202"><text id="SvgjsText1203" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="8.875" transform="rotate(0)"><tspan id="SvgjsTspan1204" dy="16" x="60"><tspan id="SvgjsTspan1205" style="text-decoration:;">实例初始化</tspan></tspan></text></g></g><g id="SvgjsG1206" transform="translate(961.5,868)"><path id="SvgjsPath1207" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1208"><text id="SvgjsText1209" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="8.875" transform="rotate(0)"><tspan id="SvgjsTspan1210" dy="16" x="60"><tspan id="SvgjsTspan1211" style="text-decoration:;">实例调用</tspan></tspan></text></g></g><g id="SvgjsG1212" transform="translate(1175,736)"><path id="SvgjsPath1213" d="M 0 0L 244 0L 244 70L 0 70Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1214"><text id="SvgjsText1215" font-family="微软雅黑" text-anchor="start" font-size="13px" width="224px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.875" transform="rotate(0)"><tspan id="SvgjsTspan1216" dy="16" x="10"><tspan id="SvgjsTspan1217" style="text-decoration:;">def __init__(self, get_response):</tspan></tspan><tspan id="SvgjsTspan1218" dy="16" x="10"><tspan id="SvgjsTspan1219" style="text-decoration:;">        print('Bottom init')</tspan></tspan><tspan id="SvgjsTspan1220" dy="16" x="10"><tspan id="SvgjsTspan1221" style="text-decoration:;">        self.get_response = get_response</tspan></tspan></text></g></g><g id="SvgjsG1222" transform="translate(1175,824)"><path id="SvgjsPath1223" d="M 0 0L 244 0L 244 128L 0 128Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1224"><text id="SvgjsText1225" font-family="微软雅黑" text-anchor="start" font-size="13px" width="224px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="12.375" transform="rotate(0)"><tspan id="SvgjsTspan1226" dy="16" x="10"><tspan id="SvgjsTspan1227" style="text-decoration:;">def __call__(self, request):</tspan></tspan><tspan id="SvgjsTspan1228" dy="16" x="10"><tspan id="SvgjsTspan1229" style="text-decoration:;">        print('Bottom call')</tspan></tspan><tspan id="SvgjsTspan1230" dy="16" x="10"><tspan id="SvgjsTspan1231" style="text-decoration:;">        request.set_name('Bottom')</tspan></tspan><tspan id="SvgjsTspan1232" dy="16" x="10"><tspan id="SvgjsTspan1233" style="text-decoration:;">        response = self.get_response(request)</tspan></tspan><tspan id="SvgjsTspan1234" dy="16" x="10"><tspan id="SvgjsTspan1235" style="text-decoration:;">        raise Exception('Bottom exception')</tspan></tspan><tspan id="SvgjsTspan1236" dy="16" x="10"><tspan id="SvgjsTspan1237" style="text-decoration:;">        return response</tspan></tspan></text></g></g><g id="SvgjsG1238"><path id="SvgjsPath1239" d="M1089.5 771L1131.75 771L1131.75 771L1171.4 771" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1240)"></path></g><g id="SvgjsG1242"><path id="SvgjsPath1243" d="M1082.5 888L1128.25 888L1128.25 888L1171.4 888" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1244)"></path></g><g id="SvgjsG1246" transform="translate(1115.5,1058)"><path id="SvgjsPath1247" d="M 0 0L 523 0L 523 239L 0 239Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1248"><text id="SvgjsText1249" font-family="微软雅黑" text-anchor="start" font-size="13px" width="503px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="10.875" transform="rotate(0)"><tspan id="SvgjsTspan1250" dy="16" x="10"><tspan id="SvgjsTspan1251" style="text-decoration:;">def _get_response(self, request):</tspan></tspan><tspan id="SvgjsTspan1252" dy="16" x="10"><tspan id="SvgjsTspan1253" style="text-decoration:;">        def view_func():</tspan></tspan><tspan id="SvgjsTspan1254" dy="16" x="10"><tspan id="SvgjsTspan1255" style="text-decoration:;">            print('I am view func')</tspan></tspan><tspan id="SvgjsTspan1256" dy="16" x="10"><tspan id="SvgjsTspan1257" style="text-decoration:;">        print('I am the most inner get response method')</tspan></tspan><tspan id="SvgjsTspan1258" dy="16" x="10"><tspan id="SvgjsTspan1259" style="text-decoration:;">        response = None</tspan></tspan><tspan id="SvgjsTspan1260" dy="16" x="10"><tspan id="SvgjsTspan1261" style="text-decoration:;">        # 从顶至下执行各中间件的process_view，如果没有提前返回，最后执行view_func</tspan></tspan><tspan id="SvgjsTspan1262" dy="16" x="10"><tspan id="SvgjsTspan1263" style="text-decoration:;">        for process_view in self._view_middleware:</tspan></tspan><tspan id="SvgjsTspan1264" dy="16" x="10"><tspan id="SvgjsTspan1265" style="text-decoration:;">            response = process_view(request, view_func, ['a', 'b'], test='123')</tspan></tspan><tspan id="SvgjsTspan1266" dy="16" x="10"><tspan id="SvgjsTspan1267" style="text-decoration:;">            if response:</tspan></tspan><tspan id="SvgjsTspan1268" dy="16" x="10"><tspan id="SvgjsTspan1269" style="text-decoration:;">                break</tspan></tspan><tspan id="SvgjsTspan1270" dy="16" x="10"><tspan id="SvgjsTspan1271" style="text-decoration:;">        if response is None:</tspan></tspan><tspan id="SvgjsTspan1272" dy="16" x="10"><tspan id="SvgjsTspan1273" style="text-decoration:;">            response = view_func()</tspan></tspan><tspan id="SvgjsTspan1274" dy="16" x="10"><tspan id="SvgjsTspan1275" style="text-decoration:;">        return response</tspan></tspan></text></g></g><g id="SvgjsG1276"><path id="SvgjsPath1277" d="M1639.5 1177.5L1668.5 1177.5L1668.5 771L1422.6 771" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1278)"></path><rect id="SvgjsRect1280" width="115" height="16" x="1611" y="857.8" fill="#ffffff"></rect><text id="SvgjsText1281" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="115px" fill="#323232" font-weight="400" align="top" lineHeight="16px" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="855.175" transform="rotate(0)"><tspan id="SvgjsTspan1282" dy="16" x="1668.5"><tspan id="SvgjsTspan1283" style="text-decoration:;">作为get_reponse参数</tspan></tspan></text></g><g id="SvgjsG1284"><path id="SvgjsPath1285" d="M1566 852L1595 852L1595 449L1224.6 449" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1286)"></path><rect id="SvgjsRect1288" width="115" height="16" x="1537.5" y="471.79999999999995" fill="#ffffff"></rect><text id="SvgjsText1289" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="115px" fill="#323232" font-weight="400" align="top" lineHeight="16px" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="469.17499999999995" transform="rotate(0)"><tspan id="SvgjsTspan1290" dy="16" x="1595"><tspan id="SvgjsTspan1291" style="text-decoration:;">作为get_reponse参数</tspan></tspan></text></g><g id="SvgjsG1292"><path id="SvgjsPath1293" d="M1368 530L1397 530L1397 127L1041.6 127" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1294)"></path><rect id="SvgjsRect1296" width="115" height="16" x="1339.5" y="157.29999999999998" fill="#ffffff"></rect><text id="SvgjsText1297" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="115px" fill="#323232" font-weight="400" align="top" lineHeight="16px" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="154.67499999999998" transform="rotate(0)"><tspan id="SvgjsTspan1298" dy="16" x="1397"><tspan id="SvgjsTspan1299" style="text-decoration:;">作为get_reponse参数</tspan></tspan></text></g><g id="SvgjsG1300"><path id="SvgjsPath1301" d="M1222 603L1447 603L1447 854L1420.6 854" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1302)"></path><rect id="SvgjsRect1304" width="89" height="16" x="1402.5000000000002" y="621.2" fill="#ffffff"></rect><text id="SvgjsText1305" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="89px" fill="#323232" font-weight="400" align="top" lineHeight="16px" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="618.575" transform="rotate(0)"><tspan id="SvgjsTspan1306" dy="16" x="1447.0000000000002"><tspan id="SvgjsTspan1307" style="text-decoration:;">调用get_reponse</tspan></tspan></text></g><g id="SvgjsG1308"><path id="SvgjsPath1309" d="M1039 244L1250 244L1250 528L1223.6 528" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1310)"></path><rect id="SvgjsRect1312" width="89" height="16" x="1205.5" y="285.70000000000005" fill="#ffffff"></rect><text id="SvgjsText1313" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="89px" fill="#323232" font-weight="400" align="top" lineHeight="16px" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="283.07500000000005" transform="rotate(0)"><tspan id="SvgjsTspan1314" dy="16" x="1250"><tspan id="SvgjsTspan1315" style="text-decoration:;">调用get_reponse</tspan></tspan></text></g><g id="SvgjsG1316"><path id="SvgjsPath1317" d="M1418 919L1447 919L1447 1028L1377 1028L1377 1054.4" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1318)"></path><rect id="SvgjsRect1320" width="101" height="16" x="1396.5" y="999.2" fill="#ffffff"></rect><text id="SvgjsText1321" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="top" lineHeight="16px" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="996.575" transform="rotate(0)"><tspan id="SvgjsTspan1322" dy="16" x="1447"><tspan id="SvgjsTspan1323" style="text-decoration:;">调用_get_response</tspan></tspan></text></g><g id="SvgjsG1324"><path id="SvgjsPath1325" d="M126 754L170 754L170 754L211.39999999999998 754" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1326)"></path></g><g id="SvgjsG1328" transform="translate(473,1186)"><path id="SvgjsPath1329" d="M 0 0L 263 0L 263 118L 0 118Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1330"><text id="SvgjsText1331" font-family="微软雅黑" text-anchor="start" font-size="13px" width="243px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.375" transform="rotate(0)"><tspan id="SvgjsTspan1332" dy="16" x="10"><tspan id="SvgjsTspan1333" style="text-decoration:;">def get_response(self, request):</tspan></tspan><tspan id="SvgjsTspan1334" dy="16" x="10"><tspan id="SvgjsTspan1335" style="text-decoration:;">        print('execute _middleware_chain start')</tspan></tspan><tspan id="SvgjsTspan1336" dy="16" x="10"><tspan id="SvgjsTspan1337" style="text-decoration:;">        response = </tspan></tspan><tspan id="SvgjsTspan1338" dy="16" x="10"><tspan id="SvgjsTspan1339" style="text-decoration:;">self._middleware_chain(request)</tspan></tspan><tspan id="SvgjsTspan1340" dy="16" x="10"><tspan id="SvgjsTspan1341" style="text-decoration:;">        print('execute _middleware_chain end')</tspan></tspan><tspan id="SvgjsTspan1342" dy="16" x="10"><tspan id="SvgjsTspan1343" style="text-decoration:;">        return response</tspan></tspan></text></g></g><g id="SvgjsG1344" transform="translate(276,1225)"><path id="SvgjsPath1345" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1346"><text id="SvgjsText1347" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="8.875" transform="rotate(0)"><tspan id="SvgjsTspan1348" dy="16" x="60"><tspan id="SvgjsTspan1349" style="text-decoration:;">get_response</tspan></tspan></text></g></g><g id="SvgjsG1350"><path id="SvgjsPath1351" d="M397 1245L434.5 1245L434.5 1245L469.4 1245" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1352)"></path></g><g id="SvgjsG1354"><path id="SvgjsPath1355" d="M737 1245L1066 1245L1066 1023.5999999999999" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1356)"></path><rect id="SvgjsRect1358" width="129" height="16" x="947.7" y="1237" fill="#ffffff"></rect><text id="SvgjsText1359" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="129px" fill="#323232" font-weight="400" align="top" lineHeight="16px" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1234.375" transform="rotate(0)"><tspan id="SvgjsTspan1360" dy="16" x="1012.2"><tspan id="SvgjsTspan1361" style="text-decoration:;">调用_middleware_chain</tspan></tspan></text></g></svg>